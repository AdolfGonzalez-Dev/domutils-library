var y=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var P=(o,t)=>{for(var r in t)y(o,r,{get:t[r],enumerable:!0})},A=(o,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of x(t))!C.call(o,e)&&e!==r&&y(o,e,{get:()=>t[e],enumerable:!(s=T(t,e))||s.enumerable});return o};var F=o=>A(y({},"__esModule",{value:!0}),o);var k={};P(k,{$state:()=>S,createComputed:()=>w,createEffect:()=>p,createSignal:()=>m,default:()=>R});module.exports=F(k);const l=[],a=new WeakMap;function E(o,t){if(!o||!t)return;t.__subs||(t.__subs=new Set),t.__subs.has(o)||t.__subs.add(o);let r=a.get(o);r||(r=new Set,a.set(o,r)),r.add(t)}function m(o){let t=o;const r=new Set;function s(){const n=l[l.length-1];return n&&E(n,s),t}s.__subs=r;function e(n){const u=t;return typeof n=="function"?t=n(t):t=n,u===t||Array.from(r).forEach(_=>{try{_()}catch(i){setTimeout(()=>{throw i})}}),t}function c(n){return typeof n!="function"?()=>{}:(r.add(n),()=>r.delete(n))}return[s,e,c]}function p(o){if(typeof o!="function")throw new Error("createEffect: fn must be a function");let t=null;const r=()=>{const s=a.get(r);s&&(s.forEach(e=>{try{e.__subs&&e.__subs.delete(r)}catch{}}),a.delete(r));try{typeof t=="function"&&t()}catch(e){console.error(e)}t=null,l.push(r);try{const e=o();typeof e=="function"&&(t=e)}catch(e){console.error("createEffect error",e)}finally{l.pop()}};return r(),()=>{const s=a.get(r);s&&(s.forEach(e=>{try{e.__subs&&e.__subs.delete(r)}catch{}}),a.delete(r));try{typeof t=="function"&&t()}catch(e){console.error(e)}t=null}}function w(o){if(typeof o!="function")throw new Error("createComputed: fn must be a function");let t,r=!0,s=null;const e=()=>{const c=a.get(e);c&&(c.forEach(n=>{try{n.__subs&&n.__subs.delete(e)}catch{}}),a.delete(e));try{typeof s=="function"&&s()}catch{}s=null,l.push(e);try{const n=o();typeof n=="function"?s=n:t=n,r=!1}catch(n){console.error("createComputed error",n)}finally{l.pop()}};return e(),()=>(r&&e(),t)}const h=new WeakMap;function D(o,t){let r=h.get(o);r||(r=new Map,h.set(o,r));let s=r.get(t);return s||(s={__subs:new Set},r.set(t,s)),s}function S(o={}){const t=new Set,r=(e,c,n)=>{t.forEach(u=>{try{u(e,c,n)}catch(f){console.error(f)}})},s={get(e,c,n){if(c==="__isState")return!0;if(c==="subscribe")return f=>(t.add(f),()=>t.delete(f));if(c==="inspect")return()=>Object.assign({},e);const u=l[l.length-1];if(u&&typeof c=="string"){const f=D(e,c);E(u,f)}return Reflect.get(e,c,n)},set(e,c,n,u){const f=e[c];if(f===n)return e[c]=n,!0;const _=Reflect.set(e,c,n,u),i=h.get(e);if(i){const d=i.get(c);d&&d.__subs&&Array.from(d.__subs).forEach(b=>{try{b()}catch(g){setTimeout(()=>{throw g})}})}return r(c,f,n),_},deleteProperty(e,c){const n=e[c],u=c in e,f=Reflect.deleteProperty(e,c);if(u){const _=h.get(e);if(_){const i=_.get(c);i&&i.__subs&&Array.from(i.__subs).forEach(d=>{try{d()}catch(b){setTimeout(()=>{throw b})}}),_.delete(c)}r(c,n,void 0)}return f}};return new Proxy(Object.assign({},o),s)}var R={createSignal:m,createEffect:p,createComputed:w,$state:S};
//# sourceMappingURL=reactive.cjs.map
